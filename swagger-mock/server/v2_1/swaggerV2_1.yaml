---
swagger: '2.0'
info:
  title: Socle Symfony2 API
  description: Documented API for Socle symfony2
  version: 1.0.0

schemes:
- http
- https

host: localhost:8000
consumes:
- application/json
produces:
- application/json
paths:
  "/api/users":
    get:
      tags:
      - getUsers
      summary: users list
      operationId: showUsersList
      responses:
         200:
           description: "List of users retrieved successfully."
           schema:
             type: array
             items:
               $ref: "#/definitions/User"
         404:
           description: No user found.
           schema:
             properties:
              code:
                type: integer
                default: 44
              message:
                type: string
                default: No user found.
         500:
          description: Internal server error.
          schema:
            properties:
              code:
                type: integer
                default: 5
              message:
                type: string
                default: Internal server error.
    post:
      tags:
      - addAuthority
      summary: add user
      operationId: addAuthority
      parameters:
      - name: body
        in: body
        description: The user Object to create.
        required: true
        schema:
          "$ref": "#/definitions/User"
      responses:
        201:
          description: The Registration has been done successfully.
          schema:
            "$ref": "#/definitions/User"
        400:
          description: Invalid inputs.
          schema:
            properties:
              code:
                type: integer
                default: 4
              message:
                type: string
                default: Invalid inputs.
        500:
          description: Internal server error.
          schema:
            properties:
              code:
                type: integer
                default: 5
              message:
                type: string
                default: Internal server error.
  "/api/users/{id}":
    get:
      tags:
      - setActivityUser
      summary: Info for a specific user
      operationId: setActivityUser
      parameters:
      - name: id
        in: path
        description: The id of the user to retrieve
        required: true
        type: integer
      responses:
        200:
          description: User retrieved successfully.
          schema:
            "$ref": "#/definitions/User"
        400:
          description: Invalid input id.
          schema:
            properties:
              code:
                type: integer
                default: 4
              message:
                type: string
                default: Invalid input id.
        404:
          description: User not found.
          schema:
            properties:
              code:
                type: integer
                default: 44
              message:
                type: string
                default: User not found.
        500:
          description: Internal server error.
          schema:
            properties:
              code:
                type: integer
                default: 5
              message:
                type: string
                default: Internal server error.
    put:
      tags:
      - updateRole
      summary: update user profile
      operationId: updateRole
      parameters:
      - name: id
        in: path
        description: The id of the user to update.
        required: true
        type: integer
      - name: body
        in: body
        description: Created user object.
        required: true
        schema:
          "$ref": "#/definitions/User"
      responses:
        200:
          description: The modifications has been done successfully.
          schema:
            "$ref": "#/definitions/User"
        400:
          description: Invalid inputs.
          schema:
            properties:
              code:
                type: integer
                default: 4
              message:
                type: string
                default: Invalid inputs.
        404:
          description: User not found.
          schema:
            properties:
              code:
                type: integer
                default: 44
              message:
                type: string
                default: User not found.
        500:
          description: Internal server error.
          schema:
            properties:
              code:
                type: integer
                default: 5
              message:
                type: string
                default: Internal server error.
    delete:
      tags:
      - deleteUser
      summary: Delete a specific user
      operationId: deleteUserById
      parameters:
      - name: id
        in: path
        description: The id of the user to delete
        required: true
        type: integer
      responses:
        200:
          description: The user has been removed successfully.
          schema:
            properties:
              message:
                type: string
                default: The user has been deleted successfully.
        400:
          description: Invalid input id.
          schema:
            properties:
              code:
                type: integer
                default: 4
              message:
                type: string
                default: Invalid input id.
        404:
          description: User not found.
          schema:
            properties:
              code:
                type: integer
                default: 44
              message:
                type: string
                default: User not found.
        500:
          description: Internal server error.
          schema:
            properties:
              code:
                type: integer
                default: 5
              message:
                type: string
                default: Internal server error.

  "/api/authorities":
      get:
        tags:
        - getAuthorities
        summary: role list
        operationId: showAuthorityList
        responses:
           200:
             description: "List of role retrieved successfully."
             schema:
               type: array
               items:
                 $ref: "#/definitions/Authority"
           404:
             description: No role found.
             schema:
               properties:
                code:
                  type: integer
                  default: 44
                message:
                  type: string
                  default: No role found.
           500:
            description: Internal server error.
            schema:
              properties:
                code:
                  type: integer
                  default: 5
                message:
                  type: string
                  default: Internal server error.
      post:
        tags:
        - addAuthority
        summary: add Authority
        operationId: addAuthority
        parameters:
        - name: body
          in: body
          description: The Authority Object to create.
          required: true
          schema:
            "$ref": "#/definitions/Authority"
        responses:
          201:
            description: The Authority has been  successfully created.
            schema:
              "$ref": "#/definitions/Authority"
          400:
            description: Invalid inputs.
            schema:
              properties:
                code:
                  type: integer
                  default: 4
                message:
                  type: string
                  default: Invalid inputs.
          500:
            description: Internal server error.
            schema:
              properties:
                code:
                  type: integer
                  default: 5
                message:
                  type: string
                  default: Internal server error.
  "/api/authorities/{id}":
      get:
        tags:
        - getAuthorityById
        summary: Info for a specific Authority
        operationId: getAuthorityById
        parameters:
        - name: id
          in: path
          description: The id of the Authority to retrieve
          required: true
          type: integer
        responses:
          200:
            description: Authority retrieved successfully.
            schema:
              "$ref": "#/definitions/Authority"
          400:
            description: Invalid input id.
            schema:
              properties:
                code:
                  type: integer
                  default: 4
                message:
                  type: string
                  default: Invalid input id.
          404:
            description: Authority not found.
            schema:
              properties:
                code:
                  type: integer
                  default: 44
                message:
                  type: string
                  default: Authority not found.
          500:
            description: Internal server error.
            schema:
              properties:
                code:
                  type: integer
                  default: 5
                message:
                  type: string
                  default: Internal server error.
      put:
        tags:
        - updateRole
        summary: update Authority
        operationId: updateRole
        parameters:
        - name: id
          in: path
          description: The id of the Authority to update.
          required: true
          type: integer
        - name: body
          in: body
          description: Created Authority object.
          required: true
          schema:
            "$ref": "#/definitions/Authority"
        responses:
          200:
            description: The modifications has been done successfully.
            schema:
              "$ref": "#/definitions/Authority"
          400:
            description: Invalid inputs.
            schema:
              properties:
                code:
                  type: integer
                  default: 4
                message:
                  type: string
                  default: Invalid inputs.
          404:
            description: Authority not found.
            schema:
              properties:
                code:
                  type: integer
                  default: 44
                message:
                  type: string
                  default: Authority not found.
          500:
            description: Internal server error.
            schema:
              properties:
                code:
                  type: integer
                  default: 5
                message:
                  type: string
                  default: Internal server error.
      delete:
        tags:
        - deleteAuthority
        summary: Delete a specific Authority
        operationId: deleteAuthorityById
        parameters:
        - name: id
          in: path
          description: The id of the Authority to delete
          required: true
          type: integer
        responses:
          200:
            description:  Authority has been removed successfully.
            schema:
              properties:
                message:
                  type: string
                  default:  Authority has been deleted successfully.
          400:
            description: Invalid input id.
            schema:
              properties:
                code:
                  type: integer
                  default: 4
                message:
                  type: string
                  default: Invalid input id.
          404:
            description: Authority not found.
            schema:
              properties:
                code:
                  type: integer
                  default: 44
                message:
                  type: string
                  default: Authority not found.
          500:
            description: Internal server error.
            schema:
              properties:
                code:
                  type: integer
                  default: 5
                message:
                  type: string
                  default: Internal server error.

  "/api/roles":
        get:
          tags:
          - getRoles
          summary: roles list
          operationId: showRolesList
          responses:
             200:
               description: "List of Roles retrieved successfully."
               schema:
                 type: array
                 items:
                   $ref: "#/definitions/Role"
             404:
               description: No Role found.
               schema:
                 properties:
                  code:
                    type: integer
                    default: 44
                  message:
                    type: string
                    default: No Role found.
             500:
              description: Internal server error.
              schema:
                properties:
                  code:
                    type: integer
                    default: 5
                  message:
                    type: string
                    default: Internal server error.
        post:
          tags:
          - addRole
          summary: add Role
          operationId: addRole
          parameters:
          - name: body
            in: body
            description: The Role Object to create.
            required: true
            schema:
              "$ref": "#/definitions/Role"
          responses:
            201:
              description: The Role has been  successfully created.
              schema:
                "$ref": "#/definitions/Role"
            400:
              description: Invalid inputs.
              schema:
                properties:
                  code:
                    type: integer
                    default: 4
                  message:
                    type: string
                    default: Invalid inputs.
            500:
              description: Internal server error.
              schema:
                properties:
                  code:
                    type: integer
                    default: 5
                  message:
                    type: string
                    default: Internal server error.
  "/api/roles/{id}":
        get:
          tags:
          - getRoleById
          summary: Info for a specific user
          operationId: getRoleById
          parameters:
          - name: id
            in: path
            description: The id of the user to retrieve
            required: true
            type: integer
          responses:
            200:
              description: Role retrieved successfully.
              schema:
                "$ref": "#/definitions/Role"
            400:
              description: Invalid input id.
              schema:
                properties:
                  code:
                    type: integer
                    default: 4
                  message:
                    type: string
                    default: Invalid input id.
            404:
              description: Role not found.
              schema:
                properties:
                  code:
                    type: integer
                    default: 44
                  message:
                    type: string
                    default: Role not found.
            500:
              description: Internal server error.
              schema:
                properties:
                  code:
                    type: integer
                    default: 5
                  message:
                    type: string
                    default: Internal server error.
        put:
          tags:
          - updateRole
          summary: update Role
          operationId: updateRole
          parameters:
          - name: id
            in: path
            description: The id of the Role to update.
            required: true
            type: integer
          - name: body
            in: body
            description: Created Role object.
            required: true
            schema:
              "$ref": "#/definitions/Role"
          responses:
            200:
              description: The modifications has been done successfully.
              schema:
                "$ref": "#/definitions/Role"
            400:
              description: Invalid inputs.
              schema:
                properties:
                  code:
                    type: integer
                    default: 4
                  message:
                    type: string
                    default: Invalid inputs.
            404:
              description: Role not found.
              schema:
                properties:
                  code:
                    type: integer
                    default: 44
                  message:
                    type: string
                    default: Role not found.
            500:
              description: Internal server error.
              schema:
                properties:
                  code:
                    type: integer
                    default: 5
                  message:
                    type: string
                    default: Internal server error.
        delete:
          tags:
          - deleteRole
          summary: Delete a specific Role
          operationId: deleteRoleById
          parameters:
          - name: id
            in: path
            description: The id of the Role to delete
            required: true
            type: integer
          responses:
            200:
              description: The Role has been removed successfully.
              schema:
                properties:
                  message:
                    type: string
                    default: The Role has been deleted successfully.
            400:
              description: Invalid input id.
              schema:
                properties:
                  code:
                    type: integer
                    default: 4
                  message:
                    type: string
                    default: Invalid input id.
            404:
              description: Role not found.
              schema:
                properties:
                  code:
                    type: integer
                    default: 44
                  message:
                    type: string
                    default: Role not found.
            500:
              description: Internal server error.
              schema:
                properties:
                  code:
                    type: integer
                    default: 5
                  message:
                    type: string
                    default: Internal server error.
  /api/roles/{roleDesignation}:
    get:
      tags:
      - getRoleByDesignation
      summary: Find role by designation
      operationId: getRoleByDesignation
      parameters:
      - name: roleDesignation
        in: path
        description: roleDesignation
        required: true
        type: string
      responses:
                  200:
                    description: Role retrieved successfully.
                    schema:
                      "$ref": "#/definitions/Role"
                  400:
                    description: Invalid input id.
                    schema:
                      properties:
                        code:
                          type: integer
                          default: 4
                        message:
                          type: string
                          default: Invalid input id.
                  404:
                    description: Role not found.
                    schema:
                      properties:
                        code:
                          type: integer
                          default: 44
                        message:
                          type: string
                          default: Role not found.
                  500:
                    description: Internal server error.
                    schema:
                      properties:
                        code:
                          type: integer
                          default: 5
                        message:
                          type: string
                          default: Internal server error.
  /:
      get:
        produces:
          - text/html
        responses:
          default:
            description: The Swagger Person Store homepage
            schema:
              type: file
              default:
                $ref: index.html
  /contact:
          tags:
          - ContactApi
          get:
            tags:
            - GetContact
            description: Return tous les message envoier par le formulaire de contact
            operationId: findContactPerson
            parameters: &personFilters
              - name: firstname
                in: query
                description: Filters contact person by firstname
                required: false
                type: string
              - name: lastname
                in: query
                description: Filters contact person by lastname
                required: false
                type: string
              - name: email
                in: query
                description: Filters contact person by email
                required: false
                type: string
              - name: message
                in: query
                description: Filters contact person by message
                required: false
                type: string
            responses:
              default:
                description: Returns the matching contact person
                schema:
                  type: array
                  items:
                    $ref: "#/definitions/contact"
                headers:
                  last-modified:
                    type: string
                    description: The date/time that a person was last modified

          post:
            tags:
            - PostContact
            description: Creates a new contact person in the store
            operationId: addContactPerson
            parameters:
              - name: contactPerson
                in: body
                description: The contact person to add to the store
                required: true
                schema:
                  $ref: "#/definitions/contact"
            responses:
              201:
                description: Returns the newly-added person
                schema:
                  $ref: "#/definitions/contact"
                headers:
                  Location:
                    type: string
                    description: The URL of the newly-added person


  "/api/logs":
          get:
            tags:
            - getLogs
            summary: Logs list
            operationId: showLogsList
            responses:
               200:
                 description: "List of Logs retrieved successfully."
                 schema:
                   type: array
                   items:
                     $ref: "#/definitions/Log"
               404:
                 description: No Log found.
                 schema:
                   properties:
                    code:
                      type: integer
                      default: 44
                    message:
                      type: string
                      default: No Log found.
               500:
                description: Internal server error.
                schema:
                  properties:
                    code:
                      type: integer
                      default: 5
                    message:
                      type: string
                      default: Internal server error.
          post:
            tags:
            - addLog
            summary: add Log
            operationId: addLog
            parameters:
            - name: body
              in: body
              description: The Log Object to create.
              required: true
              schema:
                "$ref": "#/definitions/Log"
            responses:
              201:
                description: The Log has been  successfully created.
                schema:
                  "$ref": "#/definitions/Log"
              400:
                description: Invalid inputs.
                schema:
                  properties:
                    code:
                      type: integer
                      default: 4
                    message:
                      type: string
                      default: Invalid inputs.
              500:
                description: Internal server error.
                schema:
                  properties:
                    code:
                      type: integer
                      default: 5
                    message:
                      type: string
                      default: Internal server error.

definitions:
  User:
    type: object
    required:
    - username
    - firstname
    - lastname
    - password
    - id
    - roles
    properties:
      username:
        type: string
        example: firas.jenzri
        minLength: 3
        maxLength: 20
      firstname:
        type: string
        example: Firas
        minLength: 3
        maxLength: 20
      lastname:
        type: string
        example: Jenzri
        minLength: 3
        maxLength: 20
      password:
        type: string
        example: '12345'
      email:
        type: string
        example: firas.jenzri.stg@sifast.com
        minLength: 6
        maxLength: 40
      dateOfBirth:
        type: string
        example: 01/01/2000
      gender:
        type: string
        enum:
        - male
        - female
        example: male
      phone:
        type: string
        example: ''
      roles:
        type: array
        uniqueItems: true
        items:
          $ref: "#/definitions/Role"

  Authority:
      type: object
      required:
      - designation
      - description
      - id
      properties:
        designation:
          type: string
          example: AUTH_USER_CREATE
          minLength: 3
          maxLength: 100
        description:
          type: string
          example: You have permission to create.
          minLength: 5
          maxLength: 200
  Role:
        type: object
        required:
        - designation
        - description
        - id
        - authorities
        properties:
          designation:
            type: string
            example: ROLE_ADMIN
            minLength: 3
            maxLength: 100
          description:
            type: string
            example: admin ,Super Administrator
            minLength: 5
            maxLength: 200
          authorities:
            type: array
            uniqueItems: true
            items:
              $ref: "#/definitions/Authority"
  contact:
      type: object
      properties:
        firstname:
          type: string
        lastname:
          type: string
        email:
          type: string
        message:
          type: string
  Log:
    type: array
    items:
      type: object
      properties:
        level:
          type: string
        time:
          type: string
        message:
          type: string
        userId:
          type: integer
