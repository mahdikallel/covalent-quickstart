<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SiFAST Mock Server (Swagger)</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
</head>
<body>
<main class="container">
  <form class="well">
    <fieldset>
      <legend class="col-md-9 col-md-offset-2">Add/Edit/Delete a User</legend>
      <div class="col-md-7 col-md-offset-2">
        <div class="form-group">
                            <!--<textarea id="person" name="person" cols="60" rows="8" class="form-control">-->
                                       <!--{-->
                                          <!--"id":1,-->
                                          <!--"username": "username",-->
                                          <!--"firstname": "firstname",-->
                                          <!--"lastname": "lastname",-->
                                          <!--"password": "00000000",-->
                                          <!--"email": "firstname.lastname@sifast.com",-->
                                          <!--"dateOfBirth": "01/01/2000",-->
                                          <!--"gender": "male",-->
                                          <!--"phone": ""-->
                                       <!--}-->
                            <!--</textarea>-->
          <textarea id="person" name="person" cols="60" rows="8" class="form-control">
                                                                                                      {
                                          "id":1,
                                          "username": "username",
                                          "firstname": "firstname",
                                          "lastname": "lastname",
                                          "password": "00000000",
                                          "email": "firstname.lastname@sifast.com",
                                          "dateOfBirth": "01/01/2000",
                                          "gender": "male",
                                          "phone": "",
                                           "roles":[
                                          {
                                          "id": "1",
                                          "name": "Administrator",
                                          "description": "Role: Administrator"
                                         }
                            ]
                                       }


          </textarea>


        </div>
      </div>
      <p>
                        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-success btn-block" onclick="saveUser()">
                                <i class="glyphicon glyphicon-ok"></i>
                                Save <span class="person-label">User</span>
                            </button>
                            &nbsp;
                        </span>
        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-danger btn-block" onclick="deleteUser()">
                                <i class="glyphicon glyphicon-remove"></i>
                                Delete <span class="pet-label">User</span>
                            </button>
                            &nbsp;
                        </span>

        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-warning btn-block" onclick="updateUser()">
                                <i class="glyphicon glyphicon-retweet"></i>
                                Update <span class="pet-label">User</span>
                            </button>
                            &nbsp;
                        </span>


        <span class="col-xs-6 col-xs-offset-3 col-sm-4 col-sm-offset-0 col-md-2">
                            <a href="api/users" class="btn btn-default btn-block">
                                <i class="glyphicon glyphicon-list"></i>
                                All Users
                            </a>
                        </span>
      </p>
    </fieldset>
  </form>


  <form class="well">
    <fieldset>
      <legend class="col-md-9 col-md-offset-2">Contact Send a message</legend>
      <div class="col-md-7 col-md-offset-2">
        <div class="form-group">




          <textarea id="contact" name="contact" cols="60" rows="8" class="form-control">
                                       {
                                          "firstname": "firstname",
                                          "email": "firstname.lastname@sifast.com",
                                          "lastname": "lastname",
                                           "message": "hello"
                                       }
                            </textarea>
        </div>
      </div>
      <p>





        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-success btn-block" onclick="saveContact()">
                                <i class="glyphicon glyphicon-ok"></i>
                                save <span class="pet-label">Contact</span>
                            </button>
                            &nbsp;
                        </span>
        <span class="col-xs-6 col-xs-offset-3 col-sm-4 col-sm-offset-0 col-md-2">
                            <a href="contact" class="btn btn-default btn-block">
                                <i class="glyphicon glyphicon-list"></i>
                                All messages
                            </a>
                        </span>
      </p>
    </fieldset>
  </form>


  <form class="well">
    <fieldset>
      <legend class="col-md-9 col-md-offset-2">Create Edit Delete a permission</legend>
      <div class="col-md-7 col-md-offset-2">
        <div class="form-group">

          <textarea id="permission" name="permission" cols="60" rows="8" class="form-control">
                                       {
                                          "id": "1",
                                          "name": "Menu access",
                                          "description": "You have the permission to acces to the menu "
                                       }
                            </textarea>
        </div>
      </div>
      <p>





        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-success btn-block" onclick="savePermission()">
                                <i class="glyphicon glyphicon-ok"></i>
                                save <span class="pet-label">Permission</span>
                            </button>
                            &nbsp;
                        </span>

        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-danger btn-block" onclick="deletePermission()">
                                <i class="glyphicon glyphicon-remove"></i>
                                Delete <span class="pet-label">permission</span>
                            </button>
                            &nbsp;
                        </span>

        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-warning btn-block" onclick="updatePermission()">
                                <i class="glyphicon glyphicon-retweet"></i>
                                Update <span class="pet-label">permission</span>
                            </button>
                            &nbsp;
                        </span>
        <span class="col-xs-6 col-xs-offset-3 col-sm-4 col-sm-offset-0 col-md-2">
                            <a href="api/permissions" class="btn btn-default btn-block">
                                <i class="glyphicon glyphicon-list"></i>
                                All Permission
                            </a>
                        </span>
      </p>
    </fieldset>
  </form>


  <form class="well">
    <fieldset>
      <legend class="col-md-9 col-md-offset-2">Create Edit Delete a role</legend>
      <div class="col-md-7 col-md-offset-2">
        <div class="form-group">

          <textarea id="role" name="role" cols="60" rows="8" class="form-control">
                                       {
                                          "id": "1",
                                          "name": "Administrator",
                                          "description": "Role: Administrator",
                                          "permissions":[
                                                {
                                          "id": "1",
                                          "name": "Menu access",
                                          "description": "You have the permission to acces to the menu "
                                             },
                                               {
                                          "id": "2",
                                          "name": "Send message",
                                          "description": "You have the permission to send message to the administrator "
                                             }
                                           ]
                                       }
                            </textarea>
        </div>
      </div>
      <p>





        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-success btn-block" onclick="saveRole()">
                                <i class="glyphicon glyphicon-ok"></i>
                                save <span class="pet-label">Role</span>
                            </button>
                            &nbsp;
                        </span>

        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-danger btn-block" onclick="deleteRole()">
                                <i class="glyphicon glyphicon-remove"></i>
                                Delete <span class="pet-label">Role</span>
                            </button>
                            &nbsp;
                        </span>

        <span class="col-xs-6 col-sm-4 col-md-2">
                            <button type="button" class="btn btn-warning btn-block" onclick="updateRole()">
                                <i class="glyphicon glyphicon-retweet"></i>
                                Update <span class="pet-label">Role</span>
                            </button>
                            &nbsp;
                        </span>
        <span class="col-xs-6 col-xs-offset-3 col-sm-4 col-sm-offset-0 col-md-2">
                            <a href="api/roles" class="btn btn-default btn-block">
                                <i class="glyphicon glyphicon-list"></i>
                                All Role
                            </a>
                        </span>
      </p>
    </fieldset>
  </form>
</main>

<article id="results-modal" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <header class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
        <h4 class="modal-title">Results</h4>
      </header>
      <iframe id="results" name="results" seamless class="modal-body" style="width: 100%; border: none"></iframe>
    </div>
  </div>
</article>

<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script>
  var person;
  var role;
  var permission;

  function saveUser() {
    parseUser() && $.ajax({
      type: 'POST',
      url: 'api/users',
      data: $('#person').val(),
      contentType: 'application/json',
      dataType: 'text'
    }).always(showModal);
  }

  function deleteUser() {
    parseUser() && $.ajax({
      type: 'DELETE',
      url: 'api/users/' + person.id,
      dataType: 'text'
    }).always(showModal);
  }

  function updateUser() {
    parseUser() && $.ajax({
      type: 'PUT',
      url: 'api/users/' + person.id,
      data: $('#person').val(),
      contentType: 'application/json',
      dataType: 'text'
    }).always(showModal);
  }

  function parseUser() {
    try {
      return person = JSON.parse($('#person').val());
    }
    catch (e) {
      person = null;
    }
  }


  function saveContact() {
    $.ajax({
      type: 'POST',
      url: 'contact',
      data: $('#contact').val(),
      contentType: 'application/json',
      dataType: 'text'
    }).always(showModal);
  }



  function parsePermission() {
    try {
      return permission = JSON.parse($('#permission').val());
    }
    catch (e) {
      permission = null;
    }
  }

  function savePermission() {
    $.ajax({
      type: 'POST',
      url: 'api/permissions',
      data: $('#permission').val(),
      contentType: 'application/json',
      dataType: 'text'
    }).always(showModal);
  }

  function deletePermission() {
    parsePermission() &&  $.ajax({
      type: 'DELETE',
      url: 'api/permissions/' + permission.id,
      dataType: 'text'
    }).always(showModal);
  }

  function updatePermission() {
    parsePermission() && $.ajax({
      type: 'PUT',
      url: 'api/permissions/' + permission.id,
      data: $('#permission').val(),
      contentType: 'application/json',
      dataType: 'text'
    }).always(showModal);
  }



  function parseRole() {
    try {
      return role = JSON.parse($('#role').val());
    }
    catch (e) {
      role = null;
    }
  }

  function saveRole() {
    $.ajax({
      type: 'POST',
      url: 'api/roles',
      data: $('#role').val(),
      contentType: 'application/json',
      dataType: 'text'
    }).always(showModal);
  }

  function deleteRole() {
  parseRole() &&  $.ajax({
      type: 'DELETE',
      url: 'api/roles/' + role.id,
      dataType: 'text'
    }).always(showModal);
  }

  function updateRole() {
    parseRole() && $.ajax({
      type: 'PUT',
      url: 'api/users/' + role.id,
      data: $('#role').val(),
      contentType: 'application/json',
      dataType: 'text'
    }).always(showModal);
  }

  function showModal(data) {
    data = data.responseText || data || '&lt;&lt; empty response &gt;&gt;';
    $('#results-modal').modal();
    $('#results').contents().find('body').html(data);
  }
</script>
</body>
</html>
